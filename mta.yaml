_schema-version: 3.3.0
ID: sales-pricing
description: A simple CAP project.
version: 1.0.0
modules:
- name: sales-pricing-db
  type: hdb
    path: gen/db
      requires:
        - name: sales-pricing-hdi-container
        - name: sales-pricing-srv
          type: nodejs
            path: gen/srv
              requires:
                - name: sales-pricing-hdi-container
                  provides:
                    - name: srv-api
                        properties:
                              srv-url: ${default-url}
                                parameters:
                                    buildpack: nodejs_buildpack
                                        instances: 1
                                          build-parameters:
                                              builder: npm-ci
                                              - name: sales-pricing-app-content
                                                type: com.sap.application.content
                                                  path: .
                                                    requires:
                                                      - name: sales-pricing-repo-host
                                                          parameters:
                                                                content-target: true
                                                                  build-parameters:
                                                                      build-result: resources
                                                                          requires:
                                                                              - artifacts:
                                                                                    - comdeloittemdgsales.zip
                                                                                          name: comdeloittemdgsales
                                                                                                target-path: resources/
                                                                                                - name: comdeloittemdgsales
                                                                                                  type: html5
                                                                                                    path: app/sales
                                                                                                      build-parameters:
                                                                                                          build-result: dist
                                                                                                              builder: custom
                                                                                                                  commands:
                                                                                                                      - npm install
                                                                                                                          - npm run build:cf
                                                                                                                              supported-platforms: []
                                                                                                                              - name: sales-pricing-destination-content
                                                                                                                                type: com.sap.application.content
                                                                                                                                  requires:
                                                                                                                                    - name: sales-pricing-destination-service
                                                                                                                                        parameters:
                                                                                                                                              content-target: true
                                                                                                                                                - name: sales-pricing-repo-host
                                                                                                                                                    parameters:
                                                                                                                                                          service-key:
                                                                                                                                                                  name: sales-pricing-repo-host-key
                                                                                                                                                                    - name: uaa_sales-pricing
                                                                                                                                                                        parameters:
                                                                                                                                                                              service-key:
                                                                                                                                                                                      name: uaa_sales-pricing-key
                                                                                                                                                                                        parameters:
                                                                                                                                                                                            content:
                                                                                                                                                                                                  instance:
                                                                                                                                                                                                          destinations:
                                                                                                                                                                                                                  - Name: sales_pricing_solution_sales_pricing_repo_host
                                                                                                                                                                                                                            ServiceInstanceName: sales-pricing-html5-service
                                                                                                                                                                                                                                      ServiceKeyName: sales-pricing-repo-host-key
                                                                                                                                                                                                                                                sap.cloud.service: sales-pricing-solution
                                                                                                                                                                                                                                                        - Authentication: OAuth2UserTokenExchange
                                                                                                                                                                                                                                                                  Name: sales_pricing_solution_uaa_sales_pricing
                                                                                                                                                                                                                                                                            ServiceInstanceName: sales-pricing-xsuaa-service
                                                                                                                                                                                                                                                                                      ServiceKeyName: uaa_sales-pricing-key
                                                                                                                                                                                                                                                                                                sap.cloud.service: sales-pricing-solution
                                                                                                                                                                                                                                                                                                        existing_destinations_policy: ignore
                                                                                                                                                                                                                                                                                                          build-parameters:
                                                                                                                                                                                                                                                                                                              no-source: true
                                                                                                                                                                                                                                                                                                              resources:
                                                                                                                                                                                                                                                                                                              - name: sales-pricing-hdi-container
                                                                                                                                                                                                                                                                                                                type: com.sap.xs.hdi-container
                                                                                                                                                                                                                                                                                                                  parameters:
                                                                                                                                                                                                                                                                                                                      service: hana
                                                                                                                                                                                                                                                                                                                          service-plan: hdi-shared
                                                                                                                                                                                                                                                                                                                          - name: sales-pricing-repo-host
                                                                                                                                                                                                                                                                                                                            type: org.cloudfoundry.managed-service
                                                                                                                                                                                                                                                                                                                              parameters:
                                                                                                                                                                                                                                                                                                                                  service: html5-apps-repo
                                                                                                                                                                                                                                                                                                                                      service-name: sales-pricing-html5-service
                                                                                                                                                                                                                                                                                                                                          service-plan: app-host
                                                                                                                                                                                                                                                                                                                                          - name: sales-pricing-destination-service
                                                                                                                                                                                                                                                                                                                                            type: org.cloudfoundry.managed-service
                                                                                                                                                                                                                                                                                                                                              parameters:
                                                                                                                                                                                                                                                                                                                                                  config:
                                                                                                                                                                                                                                                                                                                                                        HTML5Runtime_enabled: true
                                                                                                                                                                                                                                                                                                                                                              version: 1.0.0
                                                                                                                                                                                                                                                                                                                                                                  service: destination
                                                                                                                                                                                                                                                                                                                                                                      service-name: sales-pricing-destination-service
                                                                                                                                                                                                                                                                                                                                                                          service-plan: lite
                                                                                                                                                                                                                                                                                                                                                                          - name: uaa_sales-pricing
                                                                                                                                                                                                                                                                                                                                                                            type: org.cloudfoundry.managed-service
                                                                                                                                                                                                                                                                                                                                                                              parameters:
                                                                                                                                                                                                                                                                                                                                                                                  path: ./xs-security.json
                                                                                                                                                                                                                                                                                                                                                                                      service: xsuaa
                                                                                                                                                                                                                                                                                                                                                                                          service-name: sales-pricing-xsuaa-service
                                                                                                                                                                                                                                                                                                                                                                                              service-plan: application
                                                                                                                                                                                                                                                                                                                                                                                              parameters:
                                                                                                                                                                                                                                                                                                                                                                                                deploy_mode: html5-repo
                                                                                                                                                                                                                                                                                                                                                                                                  enable-parallel-deployments: true
                                                                                                                                                                                                                                                                                                                                                                                                  build-parameters:
                                                                                                                                                                                                                                                                                                                                                                                                    before-all:
                                                                                                                                                                                                                                                                                                                                                                                                      - builder: custom
                                                                                                                                                                                                                                                                                                                                                                                                          commands:
                                                                                                                                                                                                                                                                                                                                                                                                              - npm ci
                                                                                                                                                                                                                                                                                                                                                                                                                  - npx cds build --production
                                                                                                                                                                                                                                                                                                                                                                                                                  git init